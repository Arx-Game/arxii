# Generated by Django 5.2.4 on 2026-02-22 00:36

import django.core.validators
from django.db import migrations, models
import django.db.models.deletion

import core.natural_keys


class Migration(migrations.Migration):
    initial = True

    dependencies = [
        ("character_sheets", "0001_initial"),
        ("realms", "0001_initial"),
    ]

    operations = [
        migrations.CreateModel(
            name="OrganizationType",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Unique identifier for this organization type (e.g., 'noble_family')",
                        max_length=50,
                        unique=True,
                    ),
                ),
                (
                    "rank_1_title",
                    models.CharField(
                        default="Leader",
                        help_text="Default title for rank 1 (highest)",
                        max_length=50,
                    ),
                ),
                (
                    "rank_2_title",
                    models.CharField(
                        default="Officer",
                        help_text="Default title for rank 2",
                        max_length=50,
                    ),
                ),
                (
                    "rank_3_title",
                    models.CharField(
                        default="Member",
                        help_text="Default title for rank 3",
                        max_length=50,
                    ),
                ),
                (
                    "rank_4_title",
                    models.CharField(
                        default="Associate",
                        help_text="Default title for rank 4",
                        max_length=50,
                    ),
                ),
                (
                    "rank_5_title",
                    models.CharField(
                        default="Contact",
                        help_text="Default title for rank 5 (lowest)",
                        max_length=50,
                    ),
                ),
            ],
            options={
                "abstract": False,
            },
            bases=(core.natural_keys.NaturalKeyMixin, models.Model),
        ),
        migrations.CreateModel(
            name="LegendEntry",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "title",
                    models.CharField(
                        help_text="Short name for the deed (e.g., 'Slew the Vampire Lord')",
                        max_length=200,
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        blank=True,
                        help_text="Player freeform writeup of how the deed went down",
                    ),
                ),
                (
                    "base_value",
                    models.IntegerField(
                        default=0, help_text="Initial legend value from the deed itself"
                    ),
                ),
                (
                    "source_note",
                    models.TextField(
                        blank=True,
                        help_text="Freeform placeholder for source (until mission/event models exist)",
                    ),
                ),
                (
                    "location_note",
                    models.TextField(
                        blank=True,
                        help_text="Freeform placeholder for location (until grid exists)",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                (
                    "guise",
                    models.ForeignKey(
                        help_text="The guise (identity) that earned this legend",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="legend_entries",
                        to="character_sheets.guise",
                    ),
                ),
            ],
            options={
                "verbose_name": "Legend Entry",
                "verbose_name_plural": "Legend Entries",
            },
        ),
        migrations.CreateModel(
            name="Society",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("name", models.CharField(max_length=100, unique=True)),
                ("description", models.TextField(blank=True)),
                (
                    "mercy",
                    models.IntegerField(
                        default=0,
                        help_text="Ruthlessness (-5) to Compassion (+5)",
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "method",
                    models.IntegerField(
                        default=0,
                        help_text="Cunning (-5) to Honor (+5)",
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "status",
                    models.IntegerField(
                        default=0,
                        help_text="Ambition (-5) to Humility (+5)",
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "change",
                    models.IntegerField(
                        default=0,
                        help_text="Tradition (-5) to Progress (+5)",
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "allegiance",
                    models.IntegerField(
                        default=0,
                        help_text="Loyalty (-5) to Independence (+5)",
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "power",
                    models.IntegerField(
                        default=0,
                        help_text="Hierarchy (-5) to Equality (+5)",
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "realm",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="societies",
                        to="realms.realm",
                    ),
                ),
            ],
            options={
                "verbose_name_plural": "societies",
            },
            bases=(core.natural_keys.NaturalKeyMixin, models.Model),
        ),
        migrations.CreateModel(
            name="Organization",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="The organization's name", max_length=100, unique=True
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        blank=True,
                        help_text="A description of the organization's purpose and history",
                    ),
                ),
                (
                    "mercy_override",
                    models.IntegerField(
                        blank=True,
                        help_text="Override for mercy principle (-5 to +5). If null, uses society's value.",
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "method_override",
                    models.IntegerField(
                        blank=True,
                        help_text="Override for method principle (-5 to +5). If null, uses society's value.",
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "status_override",
                    models.IntegerField(
                        blank=True,
                        help_text="Override for status principle (-5 to +5). If null, uses society's value.",
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "change_override",
                    models.IntegerField(
                        blank=True,
                        help_text="Override for change principle (-5 to +5). If null, uses society's value.",
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "allegiance_override",
                    models.IntegerField(
                        blank=True,
                        help_text="Override for allegiance principle (-5 to +5). If null, uses society's value.",
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "power_override",
                    models.IntegerField(
                        blank=True,
                        help_text="Override for power principle (-5 to +5). If null, uses society's value.",
                        null=True,
                        validators=[
                            django.core.validators.MinValueValidator(-5),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "rank_1_title_override",
                    models.CharField(
                        blank=True,
                        help_text="Override for rank 1 title. If blank, uses org_type's default.",
                        max_length=50,
                    ),
                ),
                (
                    "rank_2_title_override",
                    models.CharField(
                        blank=True,
                        help_text="Override for rank 2 title. If blank, uses org_type's default.",
                        max_length=50,
                    ),
                ),
                (
                    "rank_3_title_override",
                    models.CharField(
                        blank=True,
                        help_text="Override for rank 3 title. If blank, uses org_type's default.",
                        max_length=50,
                    ),
                ),
                (
                    "rank_4_title_override",
                    models.CharField(
                        blank=True,
                        help_text="Override for rank 4 title. If blank, uses org_type's default.",
                        max_length=50,
                    ),
                ),
                (
                    "rank_5_title_override",
                    models.CharField(
                        blank=True,
                        help_text="Override for rank 5 title. If blank, uses org_type's default.",
                        max_length=50,
                    ),
                ),
                (
                    "org_type",
                    models.ForeignKey(
                        help_text="The type of organization, which determines default rank titles",
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="organizations",
                        to="societies.organizationtype",
                    ),
                ),
                (
                    "society",
                    models.ForeignKey(
                        help_text="The society this organization belongs to",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="organizations",
                        to="societies.society",
                    ),
                ),
            ],
            options={
                "abstract": False,
            },
            bases=(core.natural_keys.NaturalKeyMixin, models.Model),
        ),
        migrations.CreateModel(
            name="LegendSpread",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "value_added",
                    models.IntegerField(
                        default=0, help_text="How much legend this spread contributed"
                    ),
                ),
                (
                    "description",
                    models.TextField(
                        blank=True,
                        help_text="The embellished version / how they told it",
                    ),
                ),
                (
                    "method",
                    models.TextField(
                        blank=True,
                        help_text="How it was spread (e.g., bard song, tavern gossip, pamphlet)",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                (
                    "legend_entry",
                    models.ForeignKey(
                        help_text="The legend entry being spread",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="spreads",
                        to="societies.legendentry",
                    ),
                ),
                (
                    "spreader_guise",
                    models.ForeignKey(
                        help_text="The guise (identity) that spread this legend",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="legend_spreads",
                        to="character_sheets.guise",
                    ),
                ),
                (
                    "societies_reached",
                    models.ManyToManyField(
                        blank=True,
                        help_text="Which societies heard this version",
                        related_name="heard_legend_spreads",
                        to="societies.society",
                    ),
                ),
            ],
            options={
                "verbose_name": "Legend Spread",
                "verbose_name_plural": "Legend Spreads",
            },
        ),
        migrations.AddField(
            model_name="legendentry",
            name="societies_aware",
            field=models.ManyToManyField(
                blank=True,
                help_text="Which societies know about this deed",
                related_name="known_legend_entries",
                to="societies.society",
            ),
        ),
        migrations.CreateModel(
            name="OrganizationMembership",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "rank",
                    models.IntegerField(
                        default=5,
                        help_text="Rank within the organization (1=leader, 5=lowest)",
                        validators=[
                            django.core.validators.MinValueValidator(1),
                            django.core.validators.MaxValueValidator(5),
                        ],
                    ),
                ),
                (
                    "joined_date",
                    models.DateTimeField(
                        auto_now_add=True,
                        help_text="When the guise joined this organization",
                    ),
                ),
                (
                    "guise",
                    models.ForeignKey(
                        help_text="The guise (character identity) that holds this membership",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="organization_memberships",
                        to="character_sheets.guise",
                    ),
                ),
                (
                    "organization",
                    models.ForeignKey(
                        help_text="The organization this membership belongs to",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="memberships",
                        to="societies.organization",
                    ),
                ),
            ],
            options={
                "verbose_name": "Organization Membership",
                "verbose_name_plural": "Organization Memberships",
                "constraints": [
                    models.UniqueConstraint(
                        fields=("organization", "guise"),
                        name="unique_organization_guise_membership",
                    )
                ],
            },
        ),
        migrations.CreateModel(
            name="OrganizationReputation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "value",
                    models.IntegerField(
                        default=0,
                        help_text="Reputation value (-1000 to 1000)",
                        validators=[
                            django.core.validators.MinValueValidator(-1000),
                            django.core.validators.MaxValueValidator(1000),
                        ],
                    ),
                ),
                (
                    "guise",
                    models.ForeignKey(
                        help_text="The guise (character identity) this reputation belongs to",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="organization_reputations",
                        to="character_sheets.guise",
                    ),
                ),
                (
                    "organization",
                    models.ForeignKey(
                        help_text="The organization this reputation is with",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="reputations",
                        to="societies.organization",
                    ),
                ),
            ],
            options={
                "verbose_name": "Organization Reputation",
                "verbose_name_plural": "Organization Reputations",
                "constraints": [
                    models.UniqueConstraint(
                        fields=("guise", "organization"),
                        name="unique_guise_organization_reputation",
                    )
                ],
            },
        ),
        migrations.CreateModel(
            name="SocietyReputation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "value",
                    models.IntegerField(
                        default=0,
                        help_text="Reputation value (-1000 to 1000)",
                        validators=[
                            django.core.validators.MinValueValidator(-1000),
                            django.core.validators.MaxValueValidator(1000),
                        ],
                    ),
                ),
                (
                    "guise",
                    models.ForeignKey(
                        help_text="The guise (character identity) this reputation belongs to",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="society_reputations",
                        to="character_sheets.guise",
                    ),
                ),
                (
                    "society",
                    models.ForeignKey(
                        help_text="The society this reputation is with",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="reputations",
                        to="societies.society",
                    ),
                ),
            ],
            options={
                "verbose_name": "Society Reputation",
                "verbose_name_plural": "Society Reputations",
                "constraints": [
                    models.UniqueConstraint(
                        fields=("guise", "society"),
                        name="unique_guise_society_reputation",
                    )
                ],
            },
        ),
    ]
