# Generated by Django 5.2.4 on 2026-01-24 04:32

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):
    initial = True

    dependencies = [
        ("classes", "0004_add_path_icon_name"),
        ("codex", "0001_initial"),
        ("distinctions", "0004_add_goal_modifier_effect_type"),
        ("permissions", "0001_initial"),
        ("roster", "0004_familymember_father_familymember_mother_and_more"),
    ]

    operations = [
        migrations.AddField(
            model_name="codexteachingoffer",
            name="visible_to_groups",
            field=models.ManyToManyField(
                blank=True,
                help_text="Permission groups who can see this (if mode is 'groups').",
                related_name="%(class)s_visible",
                to="permissions.permissiongroup",
            ),
        ),
        migrations.AddField(
            model_name="codexteachingoffer",
            name="visible_to_tenures",
            field=models.ManyToManyField(
                blank=True,
                help_text="Tenures who can see this (if mode is 'characters').",
                related_name="%(class)s_visible",
                to="roster.rostertenure",
            ),
        ),
        migrations.AddField(
            model_name="distinctioncodexgrant",
            name="distinction",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="codex_grants",
                to="distinctions.distinction",
            ),
        ),
        migrations.AddField(
            model_name="distinctioncodexgrant",
            name="entry",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="distinction_grants",
                to="codex.codexentry",
            ),
        ),
        migrations.AddField(
            model_name="pathcodexgrant",
            name="entry",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="path_grants",
                to="codex.codexentry",
            ),
        ),
        migrations.AddField(
            model_name="pathcodexgrant",
            name="path",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="codex_grants",
                to="classes.path",
            ),
        ),
        migrations.AlterUniqueTogether(
            name="charactercodexknowledge",
            unique_together={("tenure", "entry")},
        ),
        migrations.AlterUniqueTogether(
            name="beginningscodexgrant",
            unique_together={("beginnings", "entry")},
        ),
        migrations.AlterUniqueTogether(
            name="codexsubject",
            unique_together={("category", "parent", "name")},
        ),
        migrations.AlterUniqueTogether(
            name="codexentry",
            unique_together={("subject", "name")},
        ),
        migrations.AlterUniqueTogether(
            name="distinctioncodexgrant",
            unique_together={("distinction", "entry")},
        ),
        migrations.AlterUniqueTogether(
            name="pathcodexgrant",
            unique_together={("path", "entry")},
        ),
    ]
