# Generated by Django 5.2.4 on 2026-02-22 00:36

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):
    initial = True

    dependencies = [
        ("character_creation", "0002_initial"),
        ("character_sheets", "0002_initial"),
        ("classes", "0001_initial"),
        ("distinctions", "0002_initial"),
        ("forms", "0001_initial"),
        ("magic", "0001_initial"),
        ("mechanics", "0001_initial"),
        ("objects", "0013_defaultobject_alter_objectdb_id_defaultcharacter_and_more"),
        ("realms", "0001_initial"),
        ("roster", "0001_initial"),
        ("skills", "0001_initial"),
        ("species", "0001_initial"),
        ("traits", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AddField(
            model_name="beginningtradition",
            name="required_distinction",
            field=models.ForeignKey(
                blank=True,
                help_text="Distinction required to select this tradition for this beginning.",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="+",
                to="distinctions.distinction",
            ),
        ),
        migrations.AddField(
            model_name="beginningtradition",
            name="tradition",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="beginning_traditions",
                to="magic.tradition",
            ),
        ),
        migrations.AddField(
            model_name="beginnings",
            name="traditions",
            field=models.ManyToManyField(
                blank=True,
                help_text="Traditions available for this beginning during CG.",
                related_name="available_beginnings",
                through="character_creation.BeginningTradition",
                to="magic.tradition",
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="account",
            field=models.ForeignKey(
                help_text="Account creating this character",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="character_drafts",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="build",
            field=models.ForeignKey(
                blank=True,
                help_text="Selected build type",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="drafts",
                to="forms.build",
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="family",
            field=models.ForeignKey(
                blank=True,
                help_text="Selected family (null for orphan or special heritage).",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="character_drafts",
                to="roster.family",
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="family_member",
            field=models.ForeignKey(
                blank=True,
                help_text="Family member position this character is filling",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="drafts",
                to="roster.familymember",
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="height_band",
            field=models.ForeignKey(
                blank=True,
                help_text="Selected height band for CG",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="drafts",
                to="forms.heightband",
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="selected_beginnings",
            field=models.ForeignKey(
                blank=True,
                help_text="Selected beginnings path",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="drafts",
                to="character_creation.beginnings",
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="selected_gender",
            field=models.ForeignKey(
                blank=True,
                help_text="Selected gender",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="drafts",
                to="character_sheets.gender",
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="selected_path",
            field=models.ForeignKey(
                blank=True,
                help_text="Selected starting path (Prospect stage only)",
                limit_choices_to={"is_active": True, "stage": 1},
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="drafts",
                to="classes.path",
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="selected_species",
            field=models.ForeignKey(
                blank=True,
                help_text="Selected species",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="drafts",
                to="species.species",
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="selected_tradition",
            field=models.ForeignKey(
                blank=True,
                help_text="Selected magical tradition (gates magic template).",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="+",
                to="magic.tradition",
            ),
        ),
        migrations.AddField(
            model_name="draftanimaritual",
            name="draft",
            field=models.OneToOneField(
                help_text="The character draft this ritual belongs to.",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="draft_anima_ritual_new",
                to="character_creation.characterdraft",
            ),
        ),
        migrations.AddField(
            model_name="draftanimaritual",
            name="resonance",
            field=models.ForeignKey(
                help_text="The resonance that powers this ritual.",
                limit_choices_to={"category__name": "resonance"},
                on_delete=django.db.models.deletion.PROTECT,
                to="mechanics.modifiertype",
            ),
        ),
        migrations.AddField(
            model_name="draftanimaritual",
            name="skill",
            field=models.ForeignKey(
                help_text="The skill used in this ritual.",
                on_delete=django.db.models.deletion.PROTECT,
                to="skills.skill",
            ),
        ),
        migrations.AddField(
            model_name="draftanimaritual",
            name="specialization",
            field=models.ForeignKey(
                blank=True,
                help_text="Optional specialization for this ritual.",
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                to="skills.specialization",
            ),
        ),
        migrations.AddField(
            model_name="draftanimaritual",
            name="stat",
            field=models.ForeignKey(
                help_text="The stat used in this ritual.",
                limit_choices_to={"trait_type": "stat"},
                on_delete=django.db.models.deletion.PROTECT,
                to="traits.trait",
            ),
        ),
        migrations.AddField(
            model_name="draftapplication",
            name="draft",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="application",
                to="character_creation.characterdraft",
            ),
        ),
        migrations.AddField(
            model_name="draftapplication",
            name="reviewer",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="claimed_applications",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="draftapplicationcomment",
            name="application",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="comments",
                to="character_creation.draftapplication",
            ),
        ),
        migrations.AddField(
            model_name="draftapplicationcomment",
            name="author",
            field=models.ForeignKey(
                blank=True,
                help_text="Null for system-generated status change events.",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="draftgift",
            name="draft",
            field=models.ForeignKey(
                help_text="The character draft this gift belongs to.",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="draft_gifts_new",
                to="character_creation.characterdraft",
            ),
        ),
        migrations.AddField(
            model_name="draftgift",
            name="resonances",
            field=models.ManyToManyField(
                blank=True,
                help_text="Resonances associated with this gift (must be category='resonance').",
                related_name="+",
                to="mechanics.modifiertype",
            ),
        ),
        migrations.AddField(
            model_name="draftgift",
            name="source_distinction",
            field=models.ForeignKey(
                blank=True,
                help_text="The distinction that granted this bonus gift slot (null for normal gifts).",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="+",
                to="distinctions.distinction",
            ),
        ),
        migrations.AddField(
            model_name="draftmotif",
            name="draft",
            field=models.OneToOneField(
                help_text="The character draft this motif belongs to.",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="draft_motif",
                to="character_creation.characterdraft",
            ),
        ),
        migrations.AddField(
            model_name="draftmotifresonance",
            name="motif",
            field=models.ForeignKey(
                help_text="The draft motif this resonance belongs to.",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="resonances",
                to="character_creation.draftmotif",
            ),
        ),
        migrations.AddField(
            model_name="draftmotifresonance",
            name="resonance",
            field=models.ForeignKey(
                help_text="The resonance type (must be category='resonance').",
                on_delete=django.db.models.deletion.PROTECT,
                to="mechanics.modifiertype",
            ),
        ),
        migrations.AddField(
            model_name="draftmotifresonanceassociation",
            name="facet",
            field=models.ForeignKey(
                help_text="The facet imagery.",
                on_delete=django.db.models.deletion.PROTECT,
                to="magic.facet",
            ),
        ),
        migrations.AddField(
            model_name="draftmotifresonanceassociation",
            name="motif_resonance",
            field=models.ForeignKey(
                help_text="The draft motif resonance this facet belongs to.",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="facet_assignments",
                to="character_creation.draftmotifresonance",
            ),
        ),
        migrations.AddField(
            model_name="drafttechnique",
            name="effect_type",
            field=models.ForeignKey(
                help_text="The type of effect this technique produces.",
                on_delete=django.db.models.deletion.PROTECT,
                to="magic.effecttype",
            ),
        ),
        migrations.AddField(
            model_name="drafttechnique",
            name="gift",
            field=models.ForeignKey(
                help_text="The draft gift this technique belongs to.",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="techniques",
                to="character_creation.draftgift",
            ),
        ),
        migrations.AddField(
            model_name="drafttechnique",
            name="restrictions",
            field=models.ManyToManyField(
                blank=True,
                help_text="Restrictions applied to this technique for power bonuses.",
                to="magic.restriction",
            ),
        ),
        migrations.AddField(
            model_name="drafttechnique",
            name="style",
            field=models.ForeignKey(
                help_text="The style of this technique (restricted by Path).",
                on_delete=django.db.models.deletion.PROTECT,
                to="magic.techniquestyle",
            ),
        ),
        migrations.AddField(
            model_name="startingarea",
            name="default_starting_room",
            field=models.ForeignKey(
                blank=True,
                help_text="Default Evennia room where characters from this area start. Can be None during early testing.",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="starting_area_default",
                to="objects.objectdb",
            ),
        ),
        migrations.AddField(
            model_name="startingarea",
            name="realm",
            field=models.ForeignKey(
                blank=True,
                help_text="Canonical realm/area referenced by this StartingArea (realms app).",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="starting_areas",
                to="realms.realm",
            ),
        ),
        migrations.AddField(
            model_name="characterdraft",
            name="selected_area",
            field=models.ForeignKey(
                blank=True,
                help_text="Selected starting area",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="drafts",
                to="character_creation.startingarea",
            ),
        ),
        migrations.AddField(
            model_name="beginnings",
            name="starting_area",
            field=models.ForeignKey(
                help_text="The starting area this option belongs to",
                on_delete=django.db.models.deletion.CASCADE,
                related_name="beginnings",
                to="character_creation.startingarea",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplate",
            name="anima_ritual_resonance",
            field=models.ForeignKey(
                blank=True,
                help_text="Default anima ritual resonance.",
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name="+",
                to="mechanics.modifiertype",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplate",
            name="anima_ritual_skill",
            field=models.ForeignKey(
                blank=True,
                help_text="Default anima ritual skill.",
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name="+",
                to="skills.skill",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplate",
            name="anima_ritual_stat",
            field=models.ForeignKey(
                blank=True,
                help_text="Default anima ritual stat.",
                limit_choices_to={"trait_type": "stat"},
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name="+",
                to="traits.trait",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplate",
            name="path",
            field=models.ForeignKey(
                limit_choices_to={"is_active": True, "stage": 1},
                on_delete=django.db.models.deletion.CASCADE,
                related_name="tradition_templates",
                to="classes.path",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplate",
            name="resonances",
            field=models.ManyToManyField(
                blank=True,
                help_text="Template resonances (category='resonance').",
                related_name="+",
                to="mechanics.modifiertype",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplate",
            name="tradition",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="templates",
                to="magic.tradition",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplatefacet",
            name="facet",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="+",
                to="magic.facet",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplatefacet",
            name="resonance",
            field=models.ForeignKey(
                help_text="Which resonance this facet maps to.",
                on_delete=django.db.models.deletion.PROTECT,
                related_name="+",
                to="mechanics.modifiertype",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplatefacet",
            name="template",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="facets",
                to="character_creation.traditiontemplate",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplatetechnique",
            name="effect_type",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="+",
                to="magic.effecttype",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplatetechnique",
            name="style",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="+",
                to="magic.techniquestyle",
            ),
        ),
        migrations.AddField(
            model_name="traditiontemplatetechnique",
            name="template",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="techniques",
                to="character_creation.traditiontemplate",
            ),
        ),
        migrations.AlterUniqueTogether(
            name="beginningtradition",
            unique_together={("beginning", "tradition")},
        ),
        migrations.AlterUniqueTogether(
            name="draftmotifresonance",
            unique_together={("motif", "resonance")},
        ),
        migrations.AlterUniqueTogether(
            name="draftmotifresonanceassociation",
            unique_together={("motif_resonance", "facet")},
        ),
        migrations.AlterUniqueTogether(
            name="beginnings",
            unique_together={("starting_area", "name")},
        ),
        migrations.AlterUniqueTogether(
            name="traditiontemplate",
            unique_together={("tradition", "path")},
        ),
    ]
