# Generated by Django 5.2.4 on 2026-01-14 07:02

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):
    dependencies = [
        ("character_creation", "0004_speciesoption"),
    ]

    operations = [
        migrations.CreateModel(
            name="Beginnings",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Display name (e.g., 'Sleeper', 'Noble Birth')",
                        max_length=100,
                    ),
                ),
                (
                    "description",
                    models.TextField(help_text="Worldbuilding text shown to players"),
                ),
                (
                    "art_image",
                    models.URLField(blank=True, help_text="URL for visual presentation"),
                ),
                (
                    "trust_required",
                    models.IntegerField(
                        default=0,
                        help_text="Minimum trust level required to see/select this option",
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True,
                        help_text="Staff toggle to enable/disable this option",
                    ),
                ),
                (
                    "sort_order",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="Display order in selection UI (lower = first)",
                    ),
                ),
                (
                    "allows_all_species",
                    models.BooleanField(
                        default=False,
                        help_text="If True, all species for the area are available (Sleeper/Misbegotten)",
                    ),
                ),
                (
                    "family_known",
                    models.BooleanField(
                        default=True,
                        help_text="Whether family is selectable in Lineage stage (False = 'Unknown')",
                    ),
                ),
                (
                    "social_rank",
                    models.IntegerField(
                        default=0,
                        help_text="Staff-only rank for determining noble/commoner/royal (not exposed to players)",
                    ),
                ),
                (
                    "cg_point_cost",
                    models.IntegerField(
                        default=0,
                        help_text="CG point cost for selecting this option (added to species cost)",
                    ),
                ),
                (
                    "species_options",
                    models.ManyToManyField(
                        blank=True,
                        help_text="Species options available when allows_all_species is False",
                        related_name="beginnings",
                        to="character_creation.speciesoption",
                    ),
                ),
                (
                    "starting_area",
                    models.ForeignKey(
                        help_text="The starting area this option belongs to",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="beginnings",
                        to="character_creation.startingarea",
                    ),
                ),
            ],
            options={
                "verbose_name": "Beginnings",
                "verbose_name_plural": "Beginnings",
                "ordering": ["starting_area", "sort_order", "name"],
                "unique_together": {("starting_area", "name")},
            },
        ),
    ]
