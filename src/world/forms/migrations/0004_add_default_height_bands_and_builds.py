# Generated by Django 5.2.4 on 2026-01-15 17:36

from django.db import migrations


def create_default_height_bands(apps, schema_editor):
    HeightBand = apps.get_model("forms", "HeightBand")

    bands = [
        # Extended bands (not CG)
        {
            "name": "tiny",
            "display_name": "Tiny",
            "min_inches": 12,
            "max_inches": 35,
            "weight_max": 60,
            "is_cg_selectable": False,
            "hide_build": True,
            "sort_order": 0,
        },
        {
            "name": "diminutive",
            "display_name": "Diminutive",
            "min_inches": 36,
            "max_inches": 47,
            "is_cg_selectable": False,
            "hide_build": False,
            "sort_order": 1,
        },
        {
            "name": "small",
            "display_name": "Small",
            "min_inches": 48,
            "max_inches": 59,
            "is_cg_selectable": False,
            "hide_build": False,
            "sort_order": 2,
        },
        # CG bands (5'0" to 6'10")
        {
            "name": "very_short",
            "display_name": "Very Short",
            "min_inches": 60,
            "max_inches": 64,
            "is_cg_selectable": True,
            "hide_build": False,
            "sort_order": 3,
        },
        {
            "name": "short",
            "display_name": "Short",
            "min_inches": 65,
            "max_inches": 67,
            "is_cg_selectable": True,
            "hide_build": False,
            "sort_order": 4,
        },
        {
            "name": "average",
            "display_name": "Average",
            "min_inches": 68,
            "max_inches": 71,
            "is_cg_selectable": True,
            "hide_build": False,
            "sort_order": 5,
        },
        {
            "name": "tall",
            "display_name": "Tall",
            "min_inches": 72,
            "max_inches": 76,
            "is_cg_selectable": True,
            "hide_build": False,
            "sort_order": 6,
        },
        {
            "name": "very_tall",
            "display_name": "Very Tall",
            "min_inches": 77,
            "max_inches": 82,
            "is_cg_selectable": True,
            "hide_build": False,
            "sort_order": 7,
        },
        # Extended bands (not CG)
        {
            "name": "imposing",
            "display_name": "Imposing",
            "min_inches": 83,
            "max_inches": 96,
            "is_cg_selectable": False,
            "hide_build": False,
            "sort_order": 8,
        },
        {
            "name": "monstrous",
            "display_name": "Monstrous",
            "min_inches": 97,
            "max_inches": 144,
            "is_cg_selectable": False,
            "hide_build": False,
            "sort_order": 9,
        },
        {
            "name": "colossal",
            "display_name": "Colossal",
            "min_inches": 145,
            "max_inches": 600,
            "weight_min": 400,
            "is_cg_selectable": False,
            "hide_build": True,
            "sort_order": 10,
        },
    ]

    for band_data in bands:
        HeightBand.objects.get_or_create(name=band_data["name"], defaults=band_data)


def create_default_builds(apps, schema_editor):
    Build = apps.get_model("forms", "Build")

    builds = [
        {
            "name": "slight",
            "display_name": "Slight",
            "weight_factor": "2.0",
            "is_cg_selectable": True,
            "sort_order": 0,
        },
        {
            "name": "lean",
            "display_name": "Lean",
            "weight_factor": "2.2",
            "is_cg_selectable": True,
            "sort_order": 1,
        },
        {
            "name": "average",
            "display_name": "Average",
            "weight_factor": "2.5",
            "is_cg_selectable": True,
            "sort_order": 2,
        },
        {
            "name": "athletic",
            "display_name": "Athletic",
            "weight_factor": "2.5",
            "is_cg_selectable": True,
            "sort_order": 3,
        },
        {
            "name": "overweight",
            "display_name": "Overweight",
            "weight_factor": "3.0",
            "is_cg_selectable": True,
            "sort_order": 4,
        },
        {
            "name": "brawny",
            "display_name": "Brawny",
            "weight_factor": "3.0",
            "is_cg_selectable": True,
            "sort_order": 5,
        },
        {
            "name": "hulking",
            "display_name": "Hulking",
            "weight_factor": "3.5",
            "is_cg_selectable": False,
            "sort_order": 6,
        },
    ]

    for build_data in builds:
        Build.objects.get_or_create(name=build_data["name"], defaults=build_data)


def remove_defaults(apps, schema_editor):
    HeightBand = apps.get_model("forms", "HeightBand")
    Build = apps.get_model("forms", "Build")
    HeightBand.objects.all().delete()
    Build.objects.all().delete()


class Migration(migrations.Migration):
    dependencies = [
        ("forms", "0003_add_height_build_models"),
    ]

    operations = [
        migrations.RunPython(create_default_height_bands, remove_defaults),
        migrations.RunPython(create_default_builds, remove_defaults),
    ]
