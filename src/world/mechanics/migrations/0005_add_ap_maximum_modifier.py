# Generated by Django 5.2.4 on 2026-01-28 03:27

from django.db import migrations


def add_ap_maximum_modifier(apps, schema_editor):
    """Add ap_maximum modifier type to action_points category."""
    ModifierCategory = apps.get_model("mechanics", "ModifierCategory")
    ModifierType = apps.get_model("mechanics", "ModifierType")

    category = ModifierCategory.objects.get(name="action_points")

    ModifierType.objects.get_or_create(
        category=category,
        name="ap_maximum",
        defaults={
            "description": "Modifier to maximum action point capacity",
            "display_order": 3,
            "is_active": True,
        },
    )


def remove_ap_maximum_modifier(apps, schema_editor):
    """Remove ap_maximum modifier type."""
    ModifierType = apps.get_model("mechanics", "ModifierType")
    ModifierType.objects.filter(
        category__name="action_points",
        name="ap_maximum",
    ).delete()


class Migration(migrations.Migration):
    dependencies = [
        ("mechanics", "0004_add_action_points_modifiers"),
    ]

    operations = [
        migrations.RunPython(
            add_ap_maximum_modifier,
            remove_ap_maximum_modifier,
        ),
    ]
